name: Get new_file.txt

on:
  issue_comment:
    types: [created]

jobs:
  get-file:
    if: |
      github.event.issue.pull_request &&
      startsWith(github.event.comment.body, '/go') &&
      (github.actor == 'usachoco')
    runs-on: ubuntu-latest

    steps:
      - name: PRã®æœ€æ–°çŠ¶æ³ã‚’å–å¾—ã™ã‚‹
        uses: actions/checkout@v4
        with:
          ref: ${{ github.event.issue.pull_request.head.ref }}

      - name: ç¢ºèª
        run: |
          cat README.md

#
#      - name: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¾ã¨ã‚ã‚‹
#        run: |
#          mkdir work
#          mv ./README.md ./new_file.txt ./work
#
#      - name: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã¸ã‚³ãƒ”ãƒ¼ã™ã‚‹
#        env:
#          PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
#        run: |
#          # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š
#          git config --global user.name "github-actions[bot]"
#          git config --global user.email "github-actions[bot]@users.noreply.github.com"
#
#          # ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
#          git clone https://x-access-token:${{ secrets.PAT_TOKEN }}@github.com/usachoco/staging-sandbox.git staging_repo
#          cd staging_repo
#
#          # æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã€æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
#          rm -rf *
#          mv ../work/* .
#          
#          git add .
#          git commit -m "xxx"
#          git push origin main
#
#      - name: çµæœå ±å‘Š
#        uses: actions/github-script@v6
#        with:
#          script: |
#            const prNumber = context.payload.issue.number;
#            const stagingRepoUrl = 'https://usachoco.github.io/staging-sandbox';
#            const previewUrl = `${stagingRepoUrl}/README.md`;
#            
#            github.rest.issues.createComment({
#              owner: context.repo.owner,
#              repo: context.repo.repo,
#              issue_number: prNumber,
#              body: `ğŸš€ PRãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸï¼\n\n[stagingãƒªãƒã‚¸ãƒˆãƒªã®ãƒ–ãƒ©ãƒ³ãƒ](${previewUrl})`
#            });